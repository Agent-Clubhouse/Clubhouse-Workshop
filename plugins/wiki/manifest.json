{
  "id": "wiki",
  "name": "Wiki",
  "version": "1.1.0",
  "description": "Browse and edit markdown wikis stored in external directories.",
  "author": "Clubhouse Workshop",
  "engine": { "api": 0.6 },
  "scope": "project",
  "main": "./dist/main.js",
  "permissions": [
    "files",
    "files.external",
    "commands",
    "notifications",
    "agents",
    "navigation",
    "storage",
    "widgets",
    "theme"
  ],
  "externalRoots": [{ "settingKey": "wikiPath", "root": "wiki" }],
  "contributes": {
    "tab": {
      "label": "Wiki",
      "icon": "<svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M4 19.5A2.5 2.5 0 0 1 6.5 17H20\"/><path d=\"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z\"/></svg>",
      "layout": "sidebar-content"
    },
    "commands": [
      { "id": "refresh", "title": "Refresh Wiki Tree" },
      { "id": "newPage", "title": "New Wiki Page" },
      { "id": "toggleMode", "title": "Toggle View/Edit Mode" }
    ],
    "settings": [
      {
        "key": "wikiPath",
        "type": "directory",
        "label": "Wiki path",
        "description": "Path to the wiki directory. Use Browse to pick a folder, or type a path (relative paths resolve against the project root).",
        "default": "wiki"
      },
      {
        "key": "wikiStyle",
        "type": "select",
        "label": "Wiki format",
        "description": "Choose the wiki format. GitHub uses [[wiki links]] and alphabetical ordering. ADO (Azure DevOps) uses .order files and standard markdown links with dashes for spaces.",
        "default": "github",
        "options": [
          { "label": "GitHub", "value": "github" },
          { "label": "ADO (Azure DevOps)", "value": "ado" }
        ]
      },
      {
        "key": "showHiddenFiles",
        "type": "boolean",
        "label": "Show hidden files",
        "description": "Display files and directories starting with a dot.",
        "default": false
      }
    ],
    "help": {
      "topics": [
        {
          "id": "overview",
          "title": "Overview",
          "content": "## Wiki\n\nBrowse and edit markdown wikis stored in external directories. Supports both GitHub wiki format ([[wiki links]], alphabetical ordering) and Azure DevOps wiki format (.order files, markdown links).\n\nConfigure the wiki path and format in settings."
        },
        {
          "id": "features",
          "title": "Key Features",
          "content": "## Key Features\n\n**View Mode** — Renders markdown files with syntax-highlighted preview. File names are prettified (dashes/underscores become spaces). Only markdown files are shown.\n\n**Edit Mode** — Full file explorer showing all files. Edit with Cmd+S / Ctrl+S to save. Right-click for file operations (create, rename, copy, delete).\n\n**Agent Integration** — **Run Agent in Wiki** spawns a quick agent with wiki context. **Send to Agent** sends the current page to a quick or durable agent.\n\n**ADO Wiki Support** — Respects `.order` files for page ordering. Folder index pages (same-named `.md` file) are shown as folder content.\n\n**Settings** — Wiki path (absolute or relative to project root), wiki format (GitHub or ADO), and show hidden files toggle."
        },
        {
          "id": "commands",
          "title": "Commands",
          "content": "## Commands\n\nAvailable from the command palette:\n\n| Command | Description |\n|---------|-------------|\n| **Refresh Wiki Tree** | Reloads the file tree from disk |\n| **New Wiki Page** | Creates a new markdown page at the wiki root |\n| **Toggle View/Edit Mode** | Switches between view and edit mode |"
        },
        {
          "id": "permissions",
          "title": "Permissions",
          "content": "## Permissions\n\n| Permission | Why it's needed |\n|------------|----------------|\n| **files** | Read and write wiki files within the project |\n| **files.external** | Access wiki directories outside the project root |\n| **commands** | Register command palette entries |\n| **notifications** | Show success/error notifications |\n| **agents** | Spawn quick agents for wiki-context tasks |\n| **navigation** | Navigate to agent panels |\n| **storage** | Persist plugin state |\n| **widgets** | Render UI components |\n| **theme** | Adapt colors and styles to the current theme |"
        }
      ]
    }
  },
  "settingsPanel": "declarative"
}
